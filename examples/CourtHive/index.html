<!DOCTYPE html>
<html manifest="courtHive.manifest">
<head>
<!-- <link rel="apple-touch-startup-image" href="/launch.png"> -->
   <link rel="manifest" href="courtHive.manifest" manifest='courtHive.manifest'>
   <link rel="manifest" href="manifest.json">
   <link rel="apple-touch-icon" sizes="114x114" href="./icons/TMT.png">
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
   <meta name="apple-mobile-web-app-capable" content="yes">
   <meta name="apple-mobile-web-app-title" content="CourtHive">
   <meta name="application-name" content="CourtHive">
   <meta name="apple-mobile-web-app-status-bar-style" content="default">
   <meta name="mobile-web-app-capable" content="yes">
   <link rel="stylesheet" type="text/css" href="./css/courtHive.css" />
</head>

<body>
<script src="./lib/d3.v4.min.js"></script>
<script src="./lib/matchObject.js"></script>
<script src="./lib/browserStorage.js"></script>
<script src="./lib/touchManager.js"></script>
<script src="./lib/simpleChart.js"></script>
<script src="./courtHive.js"></script>
<!-- <script> mt = CourtHive(); </script> -->

<div id="modal" class="modal" style="display: none">
  <button id="close-modal" onClick="closeModal()">x</button>
  <div class="modal-content">
     <p id="modaltext" class="modaltext noselect">Message</p>
  </div>
</div>

<div id='statsscreen' style="display: none">
   <div class="statistics">
      <div class='headline'>
         Match Statistics
         <img src='./icons/edit.png' alt='Edit' class='icon' onclick="viewManager('entry')">
      </div>
      <div class='statrow'>
         <div id='playerone' class='playerone'>Player One</div>
         <div id='playertwo' class='playertwo'>Player Two</div>
      </div>
      <div id='statlines'> </div>
   </div>
</div>

<div id="mainmenu">
   <div class='flexcenter m_menuitem' onclick="viewManager('entry')">Cancel</div>
   <div id='menu_change_server' class='flexcenter m_menuitem' onclick="menuAction(this, 'changeServer')">Change Server</div>
   <div class='flexcenter m_menuitem' onclick="menuAction(this, 'newMatch')">New Match</div>
   <div id='menu_match_format' class='flexcenter m_menuitem' onclick="viewManager('matchformat')">Match Format</div>
   <div class='flexcenter m_menuitem' onclick="viewManager('matchdetails')">Match Details</div>
   <div id='menu_match_archive' class='flexcenter m_menuitem' onclick="viewManager('matcharchive')">Match Archive</div>
   <div class='flexcenter m_menuitem' onclick="menuAction(this, 'verticalview')">Change Vertical View</div>
   <!--   <div class='flexcenter m_menuitem' onclick="viewManager('importMatch')">Import Match</div> -->
</div>

<div id="matchformats" class='noselect'> </div>
<div id="matcharchive" class='noselect'> </div>
<div id="matchdetails" class='noselect'>
   <input id='blur' class='blur' readonly>
   <div class='md_detail'>
      <div class='headline'>
         Match Details
         <img src='./icons/edit.png' alt='Edit' class='icon' onclick="viewManager('entry')">
      </div>
   </div>
   <div class='md_detail'>
      <div><b>Players</b></div>
      <div class='md_player'>
         <input id='player0' class='player_entry playerone' value="Player One" onBlur="updatePositions()" >
         <div class='md_row'>
            <label>Hand:
               <select class="MDselection" id="player0_hand" tabindex="2" onChange="updatePlayers()">
                  <option value="">-</option>
                  <option value="R">R</option>
                  <option value="L">L</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Entry:
               <select class="MDselection" id="player0_entry" tabindex="3" onChange="updatePlayers()">
                  <option value="">-</option>
                  <option value="MD">Main Draw</option>
                  <option value="Q">Qualifier</option>
                  <option value="WC">Wildcard</option>
                  <option value="SE">Special Exception</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Seed:
               <select class="MDselection md_seed" id="player0_seed" tabindex="4" onChange="updatePlayers()">
                  <option value="">-</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Draw Position:
               <select class="MDselection md_draw_position" id="player0_draw_position" tabindex="5" onChange="updatePlayers()">
                  <option value="">-</option>
                  <option value="1">1</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <div class='md_label'>Rank:</div>
            <input class='t_entry md_data' id='player0_rank' placeholder='Player Rank' onChange="updatePlayers()">
         </div>
         <div class='md_row'>
            <label>Country:
               <select class="MDselection md_ioc" id="player0_ioc" tabindex="7" onChange="updatePlayers()">
                  <option value="">-</option>
               </select>
            </label>
         </div>
      </div>
      <div class='md_player'>
         <input id='player1' class='player_entry playerone' value="Player Two" onBlur="updatePositions()" >
         <div class='md_row'>
            <label>Hand:
               <select class="MDselection" id="player1_hand" tabindex="8" onChange="updatePlayers()">
                  <option value="">-</option>
                  <option value="R">R</option>
                  <option value="L">L</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Entry:
               <select class="MDselection" id="player1_entry" tabindex="4" onChange="updatePlayers()">
                  <option value="">-</option>
                  <option value="MD">Main Draw</option>
                  <option value="Q">Qualifier</option>
                  <option value="WC">Wildcard</option>
                  <option value="SE">Special Exception</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Seed:
               <select class="MDselection md_seed" id="player1_seed" tabindex="4" onChange="updatePlayers()">
                  <option value="">-</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Draw Position:
               <select class="MDselection md_draw_position" id="player1_draw_position" tabindex="4" onChange="updatePlayers()">
                  <option value="">-</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <div class='md_label'>Rank:</div>
            <input class='t_entry md_data' id='player1_rank' placeholder='Player Rank' onChange="updatePlayers()">
         </div>
         <div class='md_row'>
            <label>Country:
               <select class="MDselection md_ioc" id="player1_ioc" tabindex="5" onChange="updatePlayers()">
                  <option value="">-</option>
               </select>
            </label>
         </div>
      </div>
   </div>
   <div class='md_detail'>
      <div><b>Match</b></div>
      <div class='md_player'>
         <div class='md_row'>
            <div class='md_label'>Format:</div><div id='md_format'></div>
         </div>
         <div class='md_row'>
            <div class='md_label'>Court:</div>
            <input class='t_entry' id='match_court' placeholder='Match Court Number or Name' onChange="updateMatchDetails()">
         </div>
         <div class='md_row'>
            <div class='md_label'>Umpire:</div>
            <input class='t_entry' id='match_umpire' placeholder='Match Umpire' onChange="updateMatchDetails()">
         </div>
      </div>
   </div>
   <div class='md_detail'>
      <div><b>Event</b></div>
      <div class='md_event'>
         <div class='md_row'>
            <div class='md_label'>Name:</div>
            <input class='t_entry' id='tournament_name' placeholder='Tournament Name' onChange="updateTournamentDetails()">
         </div>
         <div class='md_row'>
            <div class='md_label'>Date:</div>
            <input class='t_entry' id='tournament_start_date' placeholder='Start Date' onChange="updateTournamentDetails()">
         </div>
         <div class='md_row'>
            <div class='md_label'>Tour:</div>
            <input class='t_entry' id='tournament_tour' placeholder='Tour' onChange="updateTournamentDetails()">
         </div>
         <div class='md_row'>
            <div class='md_label'>Rank:</div>
            <input class='t_entry' id='tournament_rank' placeholder='Tournament Rank' onChange="updateTournamentDetails()">
         </div>
         <div class='md_row'>
            <label>Surface:
               <select class="MDselection" id="tournament_surface" tabindex="5" onChange="updateTournamentDetails()">
                  <option value="">- Select -</option>
                  <option value="clay">Clay</option>
                  <option value="hard">Hard</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>In/Out:
               <select class="MDselection" id="tournament_in_out" tabindex="5" onChange="updateTournamentDetails()">
                  <option value="">- Select -</option>
                  <option value="in">Indoor</option>
                  <option value="out">Outdoor</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Draw:&nbsp;
               <select class="MDselection" id="tournament_draw" tabindex="5" onChange="updateTournamentDetails()">
                  <option value="">- Select -</option>
                  <option value="main">Main</option>
                  <option value="qual">Qualification</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Draw Size:&nbsp;
               <select class="MDselection" id="tournament_draw_size" tabindex="5" onChange="updateTournamentDetails()">
                  <option value="">- Select -</option>
                  <option value="8">8</option>
                  <option value="12">12</option>
                  <option value="16">16</option>
                  <option value="24">24</option>
                  <option value="32">32</option>
                  <option value="48">48</option>
                  <option value="64">64</option>
                  <option value="128">128</option>
               </select>
            </label>
         </div>
         <div class='md_row'>
            <label>Round:
               <select class="MDselection" id="tournament_round" tabindex="5" onChange="updateTournamentDetails()">
                  <option value="">- Select -</option>
                  <option value="F">Final</option>
                  <option value="SF">Seminfinal</option>
                  <option value="QF">Quarterfinal</option>
                  <option value="R16">Round of 16</option>
                  <option value="R32">Round of 32</option>
                  <option value="R64">Round of 64</option>
                  <option value="R128">Round of 128</option>
                  <option value="QF">Qualification Final</option>
                  <option value="QSF">Qualification Seminfinal</option>
                  <option value="QF">Qualification Quarterfinal</option>
                  <option value="Q16">Qualification R16</option>
                  <option value="Q32">Qualification R32</option>
                  <option value="Q64">Qualification R64</option>
                  <option value="RR">Round Robin</option>
               </select>
            </label>
         </div>
      </div>
   </div>
</div>

<div id='vblack' style='display: none' class='noselect'>
      <div class='vs_players flexrows'>
         <div class='vs_player flexcenter indicate_serve display_player_0'>Player One</div>
         <div class='vs_player flexcenter indicate_serve display_player_1'>Player Tow</div>
      </div>
      <div class='vs_center flexrows'>
         <div class='vs_components flexols'>
            <div class='vs_label flexcenter'>Sets</div>
            <div class='vs_label flexcenter'>Games</div>
            <div class='vs_label flexcenter'>Points</div>
         </div>
         <div class='vs_player_score flexols'>
            <div class='vs_value flexcenter display_sets_0'>0</div>
            <div class='vs_value flexcenter display_games_0'>0</div>
            <div class='vs_value flexcenter display_points_0'>0</div>
         </div>
         <div class='vs_player_score flexols'>
            <div class='vs_value flexcenter display_sets_1'>0</div>
            <div class='vs_value flexcenter display_games_1'>0</div>
            <div class='vs_value flexcenter display_points_1'>0</div>
         </div>
         <div class='vs_filler'></div>
         <div class='vs_menuaction flexcols'>
            <div class='vs_menubutton flexcenter' onclick='menuAction(this, "stats")'>Stats</div>
            <div class='vs_menubutton flexcenter' onclick='viewManager("mainmenu")'>Menu</div>
            <div class='vs_menubutton flexcenter' onclick='menuAction(this, "redo")'>Redo</div>
            <div class='vs_menubutton flexcenter' onclick='menuAction(this, "undo")'>Undo</div>
         </div>
      </div>
      <div class='vs_entry flexrows'>
         <div class='vs_player_actions'>
            <div class='vs_action_area flexrows'>
               <div class='vs_action_buttons flexcenter'>
                  <div class='vs_action_button winner modewin_player0 flexcenter' onclick='classAction(this, "modewin", 0)'>Ace</div> 
                  <div class='vs_action_button fault modeerr_player0 flexcenter' onclick='classAction(this, "modeerr", 0)'>Fault</div> 
                  <div class='vs_action_button forced modeforce flexcenter' onclick='classAction(this, "modeerr", 0)'>Forced</div> 
               </div>
               <div class='vs_mode_buttons flexcols flexcenter'>
                  <div class='vs_mode_button modeaction_player0 flexcenter' onclick='classAction(this, "modeaction", 0)'>Serve</div>
               </div>
            </div>
            <div class='vs_point flexcenter flexjustifystart'>
               <div class='vs_point_button flexcenter' onclick='classAction(this, "point", 0)'>+ Point</div>
            </div>
         </div>
         <div class='vs_player_actions'>
            <div class='vs_action_area flexrows'>
               <div class='vs_mode_buttons flexcols flexcenter'>
                  <div class='vs_mode_button modeaction_player1 flexcenter' onclick='classAction(this, "modeaction", 1)'>Return</div>
               </div>
               <div class='vs_action_buttons flexcenter'>
                  <div class='vs_action_button winner modewin_player1 flexcenter' onclick='classAction(this, "modewin", 1)'>Winner</div> 
                  <div class='vs_action_button fault modeerr_player1 flexcenter' onclick='classAction(this, "modeerr", 1)'>UFE</div> 
                  <div class='vs_action_button forced modeforce flexcenter' onclick='classAction(this, "modeerr", 1)'>Forced</div> 
               </div>
            </div>
            <div class='vs_point flexcenter flexjustifyend'>
               <div class='vs_point_button flexcenter' onclick='classAction(this, "point", 1)'>+ Point</div>
            </div>
         </div>
      </div>
   <div class='footer vs_rally'>
      <div class='vs_rallybar rally flexcenter' onclick='classAction(this, "rally")'>Rally</div>
   </div>
</div>

<div id="horizontalentry" class='noselect'>
   <div id='h_scoreboard' class='flexrows'>
      <div id='h_playernames' class='flexcols'>
         <div id='h_playerone' class='h_playername flexcenter indicate_serve display_player_0'> Player One</div>
         <div id='h_playertwo' class='h_playername flexcenter indicate_serve display_player_1'> Player Two </div>
      </div>
      <div id='h_scores' class=''>
         <div class='h_setscore flexcols'>
            <div class='flexcenter h_score'><div class='display_set_0_games_0'> 0 </div></div>
            <div class='flexcenter h_score'><div class='display_set_0_games_1'> 0 </div></div>
         </div>
         <div class='h_setscore flexcols'>
            <div class='flexcenter h_score'><div class='display_set_1_games_0'> - </div></div>
            <div class='flexcenter h_score'><div class='display_set_1_games_1'> - </div></div>
         </div>
         <div class='h_setscore flexcols'>
            <div class='flexcenter h_score'><div class='display_set_2_games_0'> - </div></div>
            <div class='flexcenter h_score'><div class='display_set_2_games_1'> - </div></div>
         </div>
         <div class='h_setscore flexcols'>
            <div class='flexcenter h_score'><div class='display_set_3_games_0'>   </div></div>
            <div class='flexcenter h_score'><div class='display_set_3_games_1'>   </div></div>
         </div>
         <div class='h_setscore flexcols'>
            <div class='flexcenter h_score'><div class='display_set_4_games_0'>   </div></div>
            <div class='flexcenter h_score'><div class='display_set_4_games_1'>   </div></div>
         </div>
      </div>
   </div>
   <div id='h_timer' class='flexrows'>
      <div class='h_playerside flexleft'>
         <div id='h_playerleft' class='display_player_0'>Player One</div>
      </div>
      <div class='h_datetime'> &nbsp; </div>
      <div class='h_datetime'> &nbsp; </div>
      <div class='h_playerside flexright'>
         <div id='h_playerright' class='display_player_1'>Player Two</div> 
      </div>
   </div>
   <div id='h_entry' class='flexrows'>
      <div id='h_left' class='flexcols h_borderright'>
         <div class='h_action'>
            <div class='h_button fault display_0_serving' onclick='classAction(this, "fault", 0)'>Fault</div>
         </div>
         <div class='h_action'>
            <div class='h_button winner' onclick='classAction(this, "winner", 0)'>Winner</div>
         </div>
         <div class='h_action'>
            <div class='h_button unforced' onclick='classAction(this, "unforced", 0)'>Unforced Error</div>
         </div>
         <div class='h_action'>
            <div class='h_button forced' onclick='classAction(this, "forced", 0)'>Fcd Error</div>
         </div>
      </div>
      <div id='h_center' class='flexcols'>
         <div id='h_extras' class='flexrows'>
            <div class='h_serviceaction'>
               <div class='h_button winner display_0_serving' onclick='classAction(this, "ace", 0)'>Ace</div>
            </div>
            <div class='h_message flexcenter'>
               <div class='h_messagetext'> &nbsp; </div>
            </div>
            <div class='h_serviceaction'>
               <div class='h_button winner display_1_serving' onclick='classAction(this, "ace", 1)'>Ace</div>
            </div>
         </div>
         <div id='h_points' class='flexrows'>
            <div class='h_point flexcenter h_borderright' onclick='classAction(this, "point", 0)'>
               <div class='display_points_0'>0</div>
            </div>
            <div class='h_point flexcenter h_borderleft' onclick='classAction(this, "point", 1)'>
               <div class='display_points_1'>0</div>
            </div>
         </div>
      </div>
      <div id='h_right' class='flexcols h_borderleft'>
         <div class='h_action'>
            <div class='h_button fault display_1_serving' onclick='classAction(this, "fault", 1)'>Fault</div>
         </div>
         <div class='h_action'>
            <div class='h_button winner' onclick='classAction(this, "winner", 1)'>Winner</div>
         </div>
         <div class='h_action'>
            <div class='h_button unforced' onclick='classAction(this, "unforced", 1)'>Unforced Error</div>
         </div>
         <div class='h_action'>
            <div class='h_button forced' onclick='classAction(this, "forced", 1)'>Fcd Error</div>
         </div>
      </div>
   </div>
   <div id='h_menu' class='flexrows'>
      <div class='h_menuitem flexcenter' onclick='classAction(this, "rally")'>
         <div class='h_button rally'>Rally</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='viewManager("mainmenu")'>
         <div class='h_button blue'>Menu</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='classAction(this, "penalty", 0)'>
         <div class='h_button'>Penalty</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='menuAction(this, "redo")'>
         <div class='h_button'>Redo</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='menuAction(this, "undo")'>
         <div class='h_button'>Undo</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='classAction(this, "penalty", 1)'>
         <div class='h_button'>Penalty</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='menuAction(this, "stats")'>
         <div class='h_button blue'>Stats</div>
      </div>
      <div class='h_menuitem flexcenter' onclick='classAction(this, "rally")'>
         <div class='h_button rally'>Rally</div>
      </div>
   </div>
</div>

<div id="vwhite" style='display: none' class='noselect'>
   <div class="entry">
      <div class='headline'>
         Players
         <img id="stats" src='./icons/chart.png' alt='Stats' class='icon' onclick="viewManager('stats')">
      </div>

      <div class="entrysection">
         <div class='player_score'>
            <div class='player'>
               <!-- <input id='player0' class='player_entry playerone' value="Player One" onBlur="updatePositions()" > -->
               <div class='display_player_0 playerone nowrap truncate'>Player One</div>
            </div>
            <div class='scores'>
               <input id='points0' class='points game_score' type="text" value="0" disabled> 
               <input id='set0_0' class='games0 set_score' type="text" value="-" disabled>
               <input id='set1_0' class='games1 set_score' type="text" value="-" disabled>
               <input id='set2_0' class='games2 set_score' type="text" value="-" disabled>
            </div>
         </div>
         <div class='player_score'>
            <div class='player'>
               <!-- <input id='player1' class='player_entry playertwo' value="Player Two" onBlur="updatePositions()"> -->
               <div class='display_player_1 playertwo nowrap'> Player Two </div>
            </div>
            <div class='scores'>
               <input id='points1' class='points game_score' type="text" value="0" disabled>
               <input id='set0_1' class='games0 set_score' type="text" value="-" disabled>
               <input id='set1_1' class='games1 set_score' type="text" value="-" disabled>
               <input id='set2_1' class='games2 set_score' type="text" value="-" disabled>
            </div>
         </div>
      </div>

      <div id='team_one' class='headline'>
         <label id='team_one_role'>Serving:</label>
         <input class='position_display playerone' value="Player One" disabled>
      </div>

      <div id='player_serving' class="entrysection">
         <div class="actions">
           <button id="first_serve" class="btn tall" onclick="classAction(this, 'firstServe')">First Serve</button>
           <button id="second_serve" class="btn tall toggle" onclick="classAction(this, 'secondServe')">Second Serve</button>
           <button id="double_fault" class="btn tall" onclick="classAction(this, 'doubleFault', 'server')">Double Fault</button>
         </div>
         <div class="actions">
           <button id="first_ace" class="btn small" onclick="classAction(this, 'ace', 'server')">Ace</button>
           <button id="second_ace" class="btn small" onclick="classAction(this, 'ace', 'server', 'second_service')">Ace</button>
           <button id="penalty" class='btn small v_red' onclick='classAction(this, "penalty", "server")'>Penalty</button>
         </div>
         <div class="actions">
           <button id="server_winner" class="btn tall" onclick="classAction(this, 'winner', 'server')">Winner</button>
           <button id="server_forced" class="btn tall" onclick="classAction(this, 'forced', 'server')">Forced Error</button>
           <button id="server_unforced" class="btn tall" onclick="classAction(this, 'unforced', 'server')">Unforced Error</button>
        </div>
     </div>

     <div id='team_two' class='headline'>
        <label id='team_two_role'>Receiving:</label>
        <input class='position_display playertwo' value="Player Two" disabled>
     </div>

     <div id='player_receiving' class="entrysection">
        <div class="actions">
           <button id="receiving_winner" class="btn tall" onclick="classAction(this, 'winner', 'receiver')">Winner</button>
           <button id="receiving_forced" class="btn tall" onclick="classAction(this, 'forced', 'receiver')">Forced Error</button>
           <button id="receiving_unforced" class="btn tall" onclick="classAction(this, 'unforced', 'receiver')">Unforced Error</button>
         </div>
     </div>

     <div id='entry_end' class='container'></div>
  </div>

   <div class='footer'>
     <div id='toolbar' class='toolbar'>
        <img src='./icons/menu.png' alt='Menu' class='icon' onclick="viewManager('mainmenu')">
        <img id='footer_change_server' src='./icons/change.png' alt='Swap' class='icon' onclick="menuAction(this, 'changeServer')">
        <img src='./icons/redo.png' alt='Redo' class='icon' onclick="menuAction(this, 'redo')">
        <img src='./icons/undo.png' alt='Undo' class='icon' onclick="menuAction(this, 'undo')">
     </div>
  </div>
</div>
<script> init(); </script>
</body>
</html>
