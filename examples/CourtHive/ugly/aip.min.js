"use strict";var aip=function(){function e(e,n,t,r){if(["GET","POST"].indexOf(t=t||"GET")<0)return!1;if("function"!=typeof r)return!1;var i=new XMLHttpRequest;return i.open(t,e,!0),i.setRequestHeader("Content-Type","application/json"),i.onload=function(){r(i.responseText)},i.onerror=function(){r('{"error":"connection error"}')},i.send(n),!0}function n(e,n){var t=new XMLHttpRequest;return"withCredentials"in t?t.open(e,n,!0):t=null,t}var t={desc:"AIP API Wrappers",version:"0.1",server:location.origin,message:"No Message"};return t.QueryString=function(){for(var e={},n=window.location.search.substring(1).split("&"),t=0;t<n.length;t++){var r=n[t].split("=");if(void 0===e[r[0]])e[r[0]]=r[1];else if("string"==typeof e[r[0]]){var i=[e[r[0]],r[1]];e[r[0]]=i}else e[r[0]].push(r[1])}return e}(),t.okeys=Object.keys(t.QueryString),t.report=function(e,r){!function(e,r){var i=n("GET",e);i?(i.onload=function(){var e=i.responseText,n=e?JSON.parse(e):{};t.message="JSON Received",r&&r(n)},i.onerror=function(){t.message="Request Unsuccessful"},i.send()):t.message="XHR not supported"}(location.origin+"/report/"+e,r)},t.shareFile=function(n,t,r,i,o){e("/api/match/push",JSON.stringify({data:n,action:"save",destination:t,filename:r,filetype:i}),"POST",o)},t.requestFile=function(n,t,r){e("/api/match/request",JSON.stringify({source:n,action:"readfile",filename:t}),"POST",r)},t.requestUrl=function(n,t){e("/api/match/request",JSON.stringify({url:n}),"POST",t)},t}();