"use strict";function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),umo=function(){function t(e,t,n,i,s,c,d){function u(e){var t=e.toUpperCase().match(/[A-Za-z]/g),r=e.match(/[*#@]/g);if(t&&(t=t.join("")),r&&(r=r.join("")),"SAQDRP".split("").indexOf(String(t))>=0)return["S","A","Q"].indexOf(t)>=0&&(f=h),["D","R","P"].indexOf(t)>=0&&(f=1-h),["Q","P"].indexOf(t)>=0&&(m.result="Penalty"),"A"==t&&(m.result="Ace"),"D"==t&&(m.first_serve={error:"Error",serves:["0e"]},m.result="Double Fault"),r&&!m.result&&("*"==r&&(m.result="Winner"),"#"==r&&(m.result="Forced Error"),"@"==r&&(m.result="Unforced Error")),m.code=e,m.winner=parseInt(f),e===e.toLowerCase()&&(m.first_serve={error:"Error",serves:["0e"]}),m}if(void 0==e)return!1;if(1==e.toString().length&&!isNaN(e)){var l=+e==t?"S":"R";return!([0,1].indexOf(+e)<0)&&{winner:+e,server:t,code:l}}var f=void 0,h=s.map(function(e){return e.indexOf(t)>=0}).indexOf(!0),m={server:t};if("object"==(void 0===e?"undefined":_typeof(e))){if(void 0!=e.winner&&[0,1].indexOf(+e.winner)>=0)return e.winner=parseInt(e.winner),e.code=e.code?e.code:e.winner==t?"S":"R",e.first_serve&&(e.code=e.code.toLowerCase()),Object.assign({},e,m);if(e.code&&u(e.code))return Object.assign({},e,m)}if("string"==typeof e){if(function(e){if(2!=(e=e.replace(":","-").split("-").map(function(e){return e.trim()}).join("-").split("D").join("40")).split("-").length)return!1;var s=d.points,u=function(e){return e.reduce(function(e,t){return e+t})};if(i.tiebreak()){var l=e.split("-").map(function(e){return parseInt(e)}),f=s.split("-").map(function(e){return parseInt(e)});if(!r(l)||2!=l.length)return!1;if(u(f)+1!=u(l))return!1;var h=[Math.abs(l[0]-f[0]),Math.abs(l[1]-f[1])];return m.winner=h.indexOf(1),m}var p=Object.assign({},a);if(i.hasDecider()&&Object.keys(o).forEach(function(e){return p[e]=o[e]}),"0-0"==e&&p[s].join("-").indexOf("G")>=0)return m.winner=n.points.indexOf(Math.max.apply(Math,_toConsumableArray(n.points))),m;void 0==p[s]&&(s="0-0");var v=!!p[s]&&p[s].indexOf(e);return v>=0?(c&&t&&(v=1-v),m.winner=v,m):void 0}(e))return m;if(u(e))return m}}function r(e){return!!Array.isArray(e)&&!(e.map(function(e){return!isNaN(e)}).indexOf(!1)>=0)}var n=function(){};n.addPoint_events=[],n.undo_events=[],n.reset_events=[],n.pointParser=t;var i={games:{advantage:{description:"Advantage Game",tiebreak:!1,hasDecider:!1,threshold:4,minDiff:2},noAdvantage:{description:"No Advantage Game",tiebreak:!1,hasDecider:!0,threshold:4,minDiff:1},tiebreak7a:{description:"Tiebreak to 7",tiebreak:!0,hasDecider:!1,threshold:7,minDiff:2},tiebreak10a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:10,minDiff:2},tiebreak12a:{description:"Tiebreak to 10",tiebreak:!0,hasDecider:!1,threshold:12,minDiff:2},tiebreak9n:{description:"Tiebreak to 9, Golden Point",tiebreak:!0,hasDecider:!0,threshold:9,minDiff:1}},sets:{AdSetsTo6tb7:{description:"Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},AdSetsTo6tb12:{description:"Advantage, 6 games for set, Tiebreak to 12",hasDecider:!0,threshold:6,minDiff:2,children:"advantage",decidingChild:"tiebreak12a"},AdSetsTo4tb7:{description:"Advantage, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:4,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"},NoAdSetsTo6tb7:{description:"No-Ad, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:6,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak7a"},NoAdSetsTo4tb7:{description:"No-Ad, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:4,minDiff:0,children:"noAdvantage",decidingChild:"tiebreak7a"},longSetTo6by2:{description:"Advantage, 6 games for set, win by 2 games",hasDecider:!1,threshold:6,minDiff:2,children:"advantage",decidingChild:"advantage"},supertiebreak:{description:"Supertiebreak",hasDecider:!0,threshold:1,minDiff:1,children:"tiebreak10a",decidingChild:"tiebreak10a"},pro10a12:{description:"10 Game No Ad Pro Set; tiebreak to 12",hasDecider:!0,threshold:10,minDiff:2,children:"noAdvantage",decidingChild:"tiebreak12a"},pro8a7:{description:"8 Game Pro Set; tiebreak to 7",hasDecider:!0,threshold:8,minDiff:2,children:"advantage",decidingChild:"tiebreak7a"}},matches:{"3_4a_7":{name:"Short Set Standard Advantage",description:"best of 3 sets, Advantage, 4 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo4tb7",decidingChild:"AdSetsTo4tb7"},"3_6a_7":{name:"Standard Advantage",description:"best of 3 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"3_6a_10":{name:"Standard Advantage, 3rd Set Supertiebreak",description:"best of 3 sets, Advantage, 6 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"supertiebreak"},"3_6n_7":{name:"Standard No-Advantage",description:"best of 3 sets, No Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"NoAdSetsTo6tb7"},"3_4n_10":{name:"Standard Under 10",description:"best of 3 sets, No Advantage, 4 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"supertiebreak"},"1_4n_7":{name:"Under 10 Qualifying",description:"4 games for set, No Advantage, Tiebreak to 7 at 3-3",hasDecider:!1,threshold:1,minDiff:0,children:"NoAdSetsTo4tb7",decidingChild:"NoAdSetsTo4tb7"},"3_6n_10":{name:"No-Ad, 3rd Set Supertiebreak",description:"best of 3 sets, No-Ad, 6 games for set, Tiebreak to 7, final set Supertiebreak",hasDecider:!0,threshold:2,minDiff:0,children:"NoAdSetsTo6tb7",decidingChild:"supertiebreak"},"5_6a_7":{name:"US Open Men",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"AdSetsTo6tb7"},"5_6a_7_long":{name:"Grand Slam Men - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:3,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"3_6a_7_long":{name:"Grand Slam Women - Final Advantage Set",description:"best of 5 sets, Advantage, 6 games for set, Tiebreak to 7, final set by 2 games",hasDecider:!0,threshold:2,minDiff:0,children:"AdSetsTo6tb7",decidingChild:"longSetTo6by2"},"1_8a_7":{name:"8 Game Pro Set",description:"1 set, Advantage, 8 games for set, Tiebreak to 7",hasDecider:!0,threshold:1,minDiff:0,children:"pro8a7",decidingChild:"pro8a7"}}};n.formats=function(){return i},n.newFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.code,n=e.description,o=e.tiebreak,a=e.hasDecider,s=e.threshold,c=e.minDiff,d=e.children,u=e.decidingChild,l=Object.keys(i).indexOf(t)>=0,f=l&&Object.keys(i[t]).indexOf(r)>=0;return(!l||!f)&&(i[t][r]={description:n,tiebreak:o,hasDecider:a,threshold:s,minDiff:c,children:d,decidingChild:u},!0)},n.stateObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,i=e.object,s=e.parent_object,c=e.child,d=e.format,u=e.common,l=void 0===u?n.common():u,f={};f.child=c,f.format=d,f.child_attributes=["hasDecider","threshold","minDiff","tiebreak","code","description"],(f.reset=function(e){f.children=[],f.local_history=[],f.counter=[0,0],f.first_service=0,s||(l.metadata.reset(),l.metadata.resetStats(),l.history=[],l.perspective_score=!1,l.events.reset().forEach(function(e){return e()})),!s&&e&&(f.format.singles(!0),f.format.type(e))})(),f.set={index:function(e){return arguments.length?(isNaN(e)||(t=e),f.set):t},liveStats:function(e){return arguments.length?!([!0,!1].indexOf(e)<0)&&(e&&!l.live_stats&&f.history.points().length&&(l.metadata.resetStats(),l.stats.counters()),!e&&l.live_stats&&l.metadata.resetStats(),l.live_stats=e,f.set):l.live_stats},perspectiveScore:function(e){return arguments.length?!f.history.points().length&&([!0,!1].indexOf(e)>=0&&(l.perspective_score=e),f.set):l.perspective_score},firstService:function(e){return arguments.length?!(l.metadata.serviceOrder().indexOf(e)<0)&&(f.first_service=e,f.set):f.first_service}},f.history={},f.history.local=function(){return f.local_history},f.history.action=function(e){return l.history.filter(function(t){return t.action==e})},f.history.points=function(e){var t=l.history.filter(function(e){return"addPoint"==e.action}).map(function(e){return e.point});return void 0!=e&&(t=t.filter(function(t){return t.set==e})),t},f.history.score=function(){var e;return"Game"==i?f.history.points().map(function(e){return e.score}):(e=[]).concat.apply(e,_toConsumableArray(f.children.map(function(e){return e.history.score()})))},f.history.games=function(){var e;return"Set"==i?f.local_history:(e=[]).concat.apply(e,_toConsumableArray(f.children.map(function(e){return e.history.games()})))},f.history.lastPoint=function(){var e=f.history.points();return e[e.length-1]||{score:"0-0"}},f.history.common=function(){return l.history},f.score=function(){var e={};e.local=f.counter,e.points="Game"==i?f.complete()?[0,0]:f.counter:f.lastChild()?f.lastChild().score().counters.points:[0,0],e.games="Set"==i?f.complete()?[0,0]:f.counter:"Match"==i?f.lastChild()?f.lastChild().score().counters.games:[0,0]:void 0,e.sets="Match"==i?f.counter:void 0;var t={counters:e};return t.points="Game"==i?f.complete()?"0-0":f.scoreboard():f.lastChild()?f.lastChild().score().points:"0-0",t.games="Set"==i?f.complete()?"0-0":f.perspectiveScore().join("-"):f.lastChild()?f.lastChild().score().games:"0-0",t.sets="Match"==i?f.complete()?"0-0":f.perspectiveScore().join("-"):f.lastChild()?f.lastChild().score().sets:"0-0",t.components={},"Match"==i&&f.children.length&&(t.components.sets=f.children.map(function(e){var t={games:e.score().counters.local};return e.lastChild()&&e.lastChild().format.tiebreak()&&(t.tiebreak=e.lastChild().score().counters.local),t})),t.display={},t},f.accessChildren=function(){return f.children},f.lastChild=function(){return f.children[f.children.length-1]},f.scoreDifference=function(){return Math.abs(f.counter[0]-f.counter[1])},f.thresholdMet=function(){return Math.max.apply(Math,_toConsumableArray(f.counter))>=f.format.threshold()},f.minDifferenceMet=function(){return f.scoreDifference()>=f.format.minDiff()},f.singleThresholdMet=function(){return Math.max.apply(Math,_toConsumableArray(f.counter))>=f.format.threshold()&&Math.min.apply(Math,_toConsumableArray(f.counter))<f.format.threshold()},f.winner=function(){return f.complete()?f.counter[0]>f.counter[1]?0:1:void 0},f.reverseScore=function(){return l.perspective_score&&f.nextTeamServing()%2==1},f.nextTeamServing=function(){return l.metadata.teams().map(function(e){return e.indexOf(f.nextService())>=0}).indexOf(!0)},f.nextTeamReceiving=function(){return l.metadata.teams().map(function(e){return e.indexOf(f.nextService())>=0}).indexOf(!1)},f.perspectiveScore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.counter,t=arguments[1];return void 0!=t?t?e.slice().reverse():e:f.reverseScore()?e.slice().reverse():e},f.complete=function(){return!!(f.thresholdMet()&&f.minDifferenceMet()||f.counter[0]>=f.format.threshold()&&f.counter[1]>=f.format.threshold()&&f.scoreDifference()&&f.format.hasDecider())},f.nextService=function(){if(f.complete())return!1;var e=f.lastChild();if(l.metadata.serviceOrder().indexOf(f.first_service)<0&&console.log("PROBLEM"),"Game"==i)return f.format.tiebreak()?l.nextTiebreakService(f.local_history,f.first_service):f.first_service;if(!e)return f.first_service;if(e.complete()){for(var t=e.lastChild();t;)t=(e=t).lastChild();var r=e.set.firstService();return l.advanceService(r)}return e.nextService()},f.currentChild=function(){if(f.complete())return!1;var e=f.lastChild();return e&&!e.complete()?e:f.newChild()},f.newChild=function(){function e(e,t,r){r.forEach(function(r){if("function"==typeof e[r]){var n=e[r]();t[r]();t[r](n);t[r]()}})}var t=f.lastChild(),r=void 0;if(t){for(var i=t.lastChild();i;)i=(t=i).lastChild();r=l.advanceService(t.set.firstService())}else r=f.first_service;var o=f.format.threshold(),a=f.format.minDiff(),s=function(e){return f.counter[0]==e&&f.counter[1]==e},c=s(o)&&(f.format.hasDecider()||1==a)||s(o-1)&&0==a,d=c?f.format.decidingChild.settings().code:f.format.children.settings().code,u=f.children.length,h=n[f.child.object]({index:u,parent_object:f,type:d,common:l});if(h.set.firstService(r),!d){var m=c?f.format.decidingChild:f.format.children;e(m,h.format,f.child_attributes),m.children&&(e(m.children,h.format.children,f.child_attributes),e(m.decidingChild,h.format.decidingChild,f.child_attributes))}return f.children.push(h),h};f.addPoint=function(e){var r;if(Array.isArray(e))return!1;if("Game"==i)return function(e){if(f.complete())return{result:!1};var r=f.nextService(),n=l.pointParser(e,r,f.history.lastPoint(),f.format,l.metadata.teams(),f.set.perspectiveScore(),f.score());if(!n)return{result:!1};f.counter[n.winner]+=1;var o=_defineProperty({points:f.counter.slice(),score:f.scoreboard(),number:f.local_history.filter(function(e){return void 0!=e.winner}).length,index:f.history.points().length},i.toLowerCase(),t),a=f.pointsToGame(),s=a?a.indexOf(1):void 0;s>=0&&s==1-l.metadata.playerTeam(r)&&(o.breakpoint=!0),f.format.tiebreak()&&(o.tiebreak=!0),l.metadata.timestamps()&&!n.uts&&(o.uts=(new Date).valueOf()),Object.assign(n,o),f.local_history.push(n);var c={action:"addPoint",result:!0,complete:f.complete(),point:n,needed:{points_to_game:a}};return l.history.push(c),c}(e);var n=f.currentChild();if(!n)return{result:!1};var o=n.addPoint(e);if(!o.result)return o;if(n.complete()){var a;f.counter[o.point.winner]+=1,f.local_history.push((a={winner:o.point.winner},_defineProperty(a,f.child.plural,f.counter.slice()),_defineProperty(a,"index",n.set.index()),a))}o.complete=f.complete(),o.next_service=f.nextService();var c=f.pointsNeeded?f.pointsNeeded():void 0;return c&&(o.needed=Object.assign({},o.needed,c)),o.point[f.child.label]=n.set.index(),o[f.child.label]=(r={complete:n.complete(),winner:n.winner()},_defineProperty(r,f.child.plural,f.counter.slice()),_defineProperty(r,"index",n.set.index()),r),s||l.addStatPoint(o),s||l.events.addPoint().forEach(function(e){return e(o)}),o},f.addPoints=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f.addMultiple({values:e})},f.addScore=function(e){var t=f.addPoint(e);if(t.result)return t;var r=f.history.lastPoint(),n=r&&"0-0"!=r.score?r.points:[0,0],i=(n.reduce(function(e,t){return e+t}),f.change.pointScore(e));if(i.result){f.undo();var o=i.pointChange.to,a=(o.reduce(function(e,t){return e+t}),o.map(function(e,t){return{diff:e-n[t],i:t}}).filter(function(e){return e.diff}));if(1==a.length&&a[0].diff>0){for(var s=void 0,c=a[0].i,d=a[0].diff,u=0;u<d;u++){if(!(s=f.addPoint(c)).result)return s;if(s.game.complete)return s}return s}}return{result:!1}},f.addScores=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return f.addMultiple({values:e,fx:f.addScore})},f.addMultiple=function(e){var t=e.values,r=void 0===t?[]:t,n=e.fx,i=void 0===n?f.addPoint:n;"string"==typeof r&&(r=r.match(/[01A-Za-z][\*\#\@]*/g));for(var o=[],a=[];r.length;){var s=r.shift(),c=i(s);c.result?o.push(c):(r.unshift(s),a=r.slice(),r=[])}return{result:o.length,added:o,rejected:a}},f.decoratePoint=function(e,t){var r=l.history.map(function(t,r){if("addPoint"==t.action&&t.point.index==e.index)return r}).filter(function(e){return void 0!=e});if(!r.length)return!1;var n=l.history[r[0]];n.point=Object.assign({},n.point,t)},f.change={},f.change.points=function(e){if(!r(e)||2!=e.length)return!1;if("Game"==i){var n=Math.max.apply(Math,_toConsumableArray(e))>f.format.threshold(),o=Math.abs(e[0]-e[1]);if(n&&o>f.format.minDiff())return!1;if(f.complete())return{result:!1};var a={action:"changePoints",result:!0,pointChange:{from:f.counter,to:e}};if(f.local_history.push(a),l.history.push(a),f.counter=e,f.complete()){var c=parseInt(f.winner());s.counter[c]+=1,s.local_history.push({winner:c,games:s.counter.slice(),index:t})}return a}return f.propagatePointChange(e,"points")},f.change.pointScore=function(e){if("0-0"==e)return f.change.points([0,0]);if("Game"==i){var t;if(f.format.tiebreak())return f.change.points(e.split("-").map(function(e){return parseInt(e)}));e=e.replace(":","-").split("-").map(function(e){return e.trim()}).join("-").split("D").join("40");var r=Object.assign({},a);f.format.hasDecider()&&Object.keys(o).forEach(function(e){return r[e]=o[e]});if((t=[]).concat.apply(t,_toConsumableArray(Object.keys(r).map(function(e){return r[e]}))).indexOf(e)<0)return!1;var n=["0","15","30","40","A","G"],s=e.split("-").map(function(e){return n.indexOf(e)});return 5==s[0]&&3!=s[1]&&(s[0]=4),5==s[1]&&3!=s[0]&&(s[1]=4),f.change.points(s)}return f.propagatePointChange(e,"pointScore")},f.propagatePointChange=function(e,t){var r=f.lastChild();if(!r){if("Match"==i)return f.newChild().newChild().change[t](e);if("Set"==i)return f.newChild().change[t](e)}return!s&&f.complete()?{result:!1}:r.complete()?f.newChild().change[t](e):r.change[t](e)},f.change.games=function(e){if(!r(e)||2!=e.length)return!1;if("Game"==i)return{result:!1};if("Set"==i){if(f.complete())return{result:!1};var t={action:"changeGames",result:!0,gameChange:{from:f.counter,to:e}};return f.local_history.push(t),l.history.push(t),f.counter=e,t}var n=f.lastChild();return n||"Match"!=i?!s&&f.complete()?{result:!1}:n.complete()?f.newChild().change.games(e):n.change.games(e):f.newChild().change.games(e)},f.undo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(isNaN(e))return!1;if("Game"!=i&&!f.children.length&&!f.local_history.length)return!1;if(!l.history.length)return!1;var t=[].concat(_toConsumableArray(Array(e).keys())).map(function(e){return function(){var e=l.history[l.history.length-1].action;return h[e]()}()});return l.events.undo().forEach(function(e){return e(t)}),1==e?t[0]:t};var h={};return h.addPoint=function(){if("Game"==i){f.local_history.pop();var e=l.history.pop();return f.counter[e.point.winner]-=1,l.removeStatPoint(e),e.point}return f.propagateUndo()},h.changePoints=function(){if("Game"==i){f.local_history.pop();var e=l.history.pop();return f.counter=e.pointChange.from,e}return f.propagateUndo()},h.changeGames=function(){if("Set"==i){f.local_history.pop();var e=l.history.pop();return f.counter=e.gameChange.from,e}return f.propagateUndo()},f.propagateUndo=function(){var e=f.lastChild(),t=e.complete(),r=e.undo();if(t){var n=f.local_history.pop();n&&void 0!=n.winner&&(f.counter[n.winner]-=1)}return e.history.local().length||void 0!=e.lastChild()||f.children.pop(),r},f},n.Match=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.index,i=t.type,o=t.common,a=void 0===o?n.common():o,s=n.matchFormat({type:i,common:a}),c=n.stateObject({index:r,object:"Match",format:s,child:{object:"Set",label:"set",plural:"sets"},common:a});return c.scoreboard=function(e){return c.children.length?(void 0==e&&(e=c.set.perspectiveScore()?c.nextService():void 0),c.children.map(function(t){return t.scoreboard(e)}).join(", ")):"0-0"},e={set:c.set,reset:c.reset,format:c.format,events:a.events,assignParser:a.assignParser,metadata:a.metadata,nextService:c.nextService,nextTeamServing:c.nextTeamServing,nextTeamReceiving:c.nextTeamReceiving,change:c.change,undo:c.undo,addPoint:c.addPoint,addPoints:c.addPoints,decoratePoint:c.decoratePoint,addScore:c.addScore,addScores:c.addScores,complete:c.complete,winner:c.winner,score:c.score,scoreboard:c.scoreboard},_defineProperty(e,c.child.plural,c.accessChildren),_defineProperty(e,"history",c.history),_defineProperty(e,"stats",a.stats),e},n.Set=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.index,i=t.parent_object,o=t.type,a=t.common,s=void 0===a?n.common():a,c=n.setFormat({type:o,common:s}),d=n.stateObject({index:r,parent_object:i,object:"Set",format:c,child:{object:"Game",label:"game",plural:"games"},common:s});d.pointsNeeded=function(){var e=d.format.threshold();if(d.complete()){var t=[];t[d.winner()]=0;var n=1-d.winner(),i=d.history.action("addPoint").filter(function(e){return e.point.set==r}).map(function(e){return e.needed.points_to_set}).filter(function(e){return e});return t[n]=Math.max.apply(Math,_toConsumableArray(i.map(function(e){return e[n]}))),{points_to_set:t}}var o=d.format.hasDecider(),a=d.scoreDifference(),s=d.format.minDiff(),c=[!1,!1],u=d.counter.map(function(t,r){var n=d.counter[1-r];return t>n?n==e&&o?0:t>=e&&a>=s?0:t>=e-1?1:e-t:n>t?(c[r]=o&&e==n,t==e&&o?0:n>=e&&a>=s?0:c[r]?a+1:n>=e-1?a+s:e-t):(c[r]=o&&e==t&&e==n||1==s&&e==t&&e==n||0==s&&e-1==t&&e-1==n,c[r]?1:t>=e-1?s:e-t)}),l=d.lastChild();return{points_to_set:u.map(function(e,t){var r=0;if(l&&!l.complete()&&(r+=l.pointsToGame()[t],e-=1),!e)return r;c[t]&&(r+=d.format.decidingChild.threshold(),e-=1);for(var n=e;n;n--)r+=d.format.children.threshold();return r}),games_to_set:u}};return d.scoreboard=function(e){var t=d.lastChild(),r=d.perspectiveScore(d.counter,e);if(!t)return r.join("-");var n=1==t.format.tiebreak();if(t.complete()&&!n)return r.join("-");if(!t.complete())return r.join("-")+" ("+t.scoreboard(e)+")";var i=t.score().counters.local,o=d.perspectiveScore(i,e);if(n&&d.complete()&&1==d.children.length)return o.join("-");t.format.threshold();return function(e,t,r){var n=_slicedToArray(e,2),i=n[0],o=n[1],a=_slicedToArray(t,2),s=a[0],c=a[1];return(s||c)&&(s>c&&(o+="("+c+")"),c>s&&(i+="("+s+")")),i+"-"+o}(r,o)},e={set:d.set,reset:d.reset,format:d.format,events:s.events,assignParser:s.assignParser,metadata:s.metadata,nextService:d.nextService,nextTeamServing:d.nextTeamServing,nextTeamReceiving:d.nextTeamReceiving,change:d.change,undo:d.undo,addPoint:d.addPoint,addPoints:d.addPoints,decoratePoint:d.decoratePoint,addScore:d.addScore,addScores:d.addScores,complete:d.complete,winner:d.winner,score:d.score,scoreboard:d.scoreboard},_defineProperty(e,d.child.plural,d.accessChildren),_defineProperty(e,"children",d.accessChildren),_defineProperty(e,"lastChild",d.lastChild),_defineProperty(e,"newChild",d.newChild),_defineProperty(e,"history",d.history),_defineProperty(e,"pointsNeeded",d.pointsNeeded),e},n.Game=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,r=e.parent_object,i=e.type,o=e.common,a=void 0===o?n.common():o,s=n.gameFormat({type:i,common:a}),c=n.stateObject({index:t,object:"Game",parent_object:r,format:s,child:{object:"Point",label:"point",plural:"points"},common:a});return c.pointsToGame=function(){if(!c.complete()){var e=c.format.threshold(),t=c.format.hasDecider(),r=c.scoreDifference(),n=c.format.minDiff();return c.counter.map(function(i,o){var a=c.counter[1-o];return i>a?a==e&&t?0:i>=e&&r>=n?0:i>=e-1?1:e-i:a>i?i==e&&t?0:a>=e&&r>=n?0:a==e&&t?r+1:a>=e-1?r+n:e-i:t&&e==i&&e==a?1:i>=e-1?n:e-i})}},c.scoreboard=function(e){var t=void 0,r=c.format.threshold(),n=c.format.minDiff(),i=c.perspectiveScore(c.counter,e);if(4!=r||1==c.format.tiebreak())return i.join("-");if(!c.thresholdMet()||c.singleThresholdMet()&&c.minDifferenceMet()||c.singleThresholdMet()&&c.format.hasDecider()&&1==n){var o=["0","15","30","40","G","G"];t=i.map(function(e,t){return o[e]}).join("-")}else t=i.map(function(e,t){var n=i[1-t],o=e-r,a=n-r;return o>a&&c.minDifferenceMet()?"G":o>a?"A":"40"}).join("-");return t.indexOf("G")>=0?"0-0":t},{set:c.set,reset:c.reset,format:c.format,events:a.events,assignParser:a.assignParser,metadata:a.metadata,nextService:c.nextService,nextTeamServing:c.nextTeamServing,nextTeamReceiving:c.nextTeamReceiving,change:c.change,undo:c.undo,addPoint:c.addPoint,addPoints:c.addPoints,decoratePoint:c.decoratePoint,addScore:c.addScore,addScores:c.addScores,complete:c.complete,winner:c.winner,score:c.score,scoreboard:c.scoreboard,history:c.history,lastChild:c.lastChild,pointsToGame:c.pointsToGame}},n.defaultPointParser=t;var o={"40-40":["G-40","40-G"]},a={"0-0":["15-0","0-15"],"0-15":["15-15","0-30"],"0-30":["15-30","0-40"],"0-40":["15-40","0-G"],"15-0":["30-0","15-15"],"15-15":["30-15","15-30"],"15-30":["30-30","15-40"],"15-40":["30-40","15-G"],"30-0":["40-0","30-15"],"30-15":["40-15","30-30"],"30-30":["40-30","30-40"],"30-40":["40-40","30-G"],"40-0":["G-0","40-15"],"40-15":["G-15","40-30"],"40-30":["G-30","40-40"],"40-40":["A-40","40-A"],"A-40":["G-40","40-40"],"40-A":["40-40","40-G"]};return n.matchFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"3_6a_7":t,i=e.common,o=n.formatObject({plural:"matches",common:i});return o.children=n.setFormat({common:i}),o.decidingChild=n.setFormat({common:i}),o.init(r),{description:o.description,singles:o.singles,doubles:o.doubles,settings:o.settings,type:o.type,types:o.types,threshold:o.threshold,hasDecider:o.hasDecider,minDiff:o.minDiff,children:o.children,decidingChild:o.decidingChild}},n.setFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"AdSetsTo6tb7":t,i=e.common,o=n.formatObject({plural:"sets",common:i});return o.children=n.gameFormat({common:i}),o.decidingChild=n.gameFormat({common:i,type:"tiebreak7a"}),o.init(r),{description:o.description,singles:o.singles,doubles:o.doubles,settings:o.settings,type:o.type,types:o.types,threshold:o.threshold,hasDecider:o.hasDecider,minDiff:o.minDiff,children:o.children,decidingChild:o.decidingChild}},n.gameFormat=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"advantage":t,i=e.common,o=n.formatObject({plural:"games",common:i});return o.init(r),{description:o.description,settings:o.settings,singles:o.singles,doubles:o.doubles,type:o.type,types:o.types,threshold:o.threshold,hasDecider:o.hasDecider,minDiff:o.minDiff,tiebreak:o.tiebreak}},n.formatObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.plural,r=e.common,o=void 0===r?n.common():r,a={values:{plural:t},singles:o.singles,doubles:o.doubles,init:function(e){a.types(a.values.plural).indexOf(e)>=0&&(a.type(e),a.values.initial_code=e)},types:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.values.plural;return Object.keys(i[e])},type:function(e){if(!a.values.plural)return!1;if(1==e&&a.values.initial_code&&(e=a.values.initial_code),a.types(a.values.plural).indexOf(e)>=0){var t=i[a.values.plural][e];return a.hasDecider(t.hasDecider).minDiff(t.minDiff).threshold(t.threshold),void 0!=t.tiebreak&&a.tiebreak(t.tiebreak),a.name(t.name),a.description(t.description),a.values.code=e,t.children&&a.children.type(t.children),t.decidingChild&&a.decidingChild.type(t.decidingChild),!0}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.description,n=e.code,i=e.players,s=e.threshold,c=e.has_decider,d=e.min_diff,u=e.tiebreak;if(n)a.type(n);else{if(!(s&&c&&d&&u)){var l="function"==typeof o.singles?o.singles()?2:4:"",f={name:a.values.name,description:a.values.description,code:a.values.code,players:l,threshold:a.values.threshold,has_decider:a.values.has_decider,min_diff:a.values.min_diff,tiebreak:a.values.tiebreak};return f}a.tiebreak(u),a.threshold(s),a.minDiff(d),a.hasDecider(c),r&&a.description(r),t&&a.name(t),i&&(4==i?a.doubles():a.singles())}},name:function(e){return arguments.length?("string"==typeof e&&(a.values.name=e),a):a.values.name},description:function(e){return arguments.length?("string"==typeof e&&(a.values.description=e),a):a.values.description},tiebreak:function(e){return arguments.length?(a.values.description=a.values.code=void 0,[!0,!1].indexOf(e)>=0&&(a.values.tiebreak=e),a):a.values.tiebreak},threshold:function(e){return arguments.length?(a.values.description=a.values.code=void 0,isNaN(e)||(a.values.threshold=e),a):a.values.threshold},minDiff:function(e){return arguments.length?(a.values.description=a.values.code=void 0,isNaN(e)||(a.values.min_diff=e),a):a.values.min_diff},hasDecider:function(e){return arguments.length?(a.values.description=a.values.code=void 0,[!0,!1].indexOf(e)>=0&&(a.values.has_decider=e),a):a.values.has_decider}};return a},n.common=function(){function t(e,t,r){var n=function(e,t){return!e.filter(function(e,r){return e!=t[r]}).length},i=function(e,t){return t.filter(function(t){return-1!=e.indexOf(t)}).length!=t.length};if(!Array.isArray(e)||e.length!=a||i(e,[0,1])||i([0,1,2,3],e))return!1;var o=e.length==l[t].length;if(n(e,l[t])&&o)return p;var s=p.teams();l[t]=e;var c=p.teams();return 4==e.length&&n(s[0],c[0])&&o&&function(e,t,r){return!e.filter(function(e,n){return function(e,t){return r.filter(function(r){return r.filter(function(r){return[e,t].indexOf(r)>=0}).length>1}).length}(e,t[n])}).length}(l[t],l[r],c)?p:(l[r]=e.map(function(t){return e.length-1-t}),p)}function r(e,t){var r=[];return[].concat(_toConsumableArray(Array(e).keys())).map(function(){var e=function(e,t){var r=function(e){return[!0].concat([].concat(_toConsumableArray(Array(e).keys())).map(function(e){return(e+1)%4<2}))[e]}(e.length),n=(e.length+1)%4<2,i=e[e.length-1],o=void 0!=i?i:void 0!=t?t:l.service_order[0];return n==r?o:v.advanceService(o)}(r,t);return r.push(e),e})}function i(){if(2==a){var e=v.metadata.serviceOrder();if(2==e.length)return;v.metadata.serviceOrder(e.filter(function(e){return[0,1].indexOf(e)>=0}))}else{var t=v.metadata.serviceOrder();if(4==t.length)return;var r=t.slice();t.forEach(function(e){return r.push(e+2)}),v.metadata.serviceOrder(r)}}function o(e){var t=e.player,r=e.team,n=e.episode,i=e.stat;void 0!=t&&(f.players[t]||(f.players[t]={}),f.players[t][i]||(f.players[t][i]=[]),n&&f.players[t][i].push(n),r=p.playerTeam(t)),void 0!=r&&(f.teams[r]||(f.teams[r]={}),f.teams[r][i]||(f.teams[r][i]=[]),n&&f.teams[r][i].push(n))}var a=2,s=n.addPoint_events.slice(),d=n.undo_events.slice(),u=n.reset_events.slice(),l={},f=void 0,h=void 0,m=void 0,p={resetStats:function(){f=void 0,h=void 0,m=void 0},reset:function(){l={players:[],teams:[],service_order:[0,1],receive_order:[1,0],tournament:{},match:{},timestamps:!1,charter:void 0}},timestamps:function(e){return arguments.length?([!0,!1].indexOf(e)>=0&&(l.timestamps=e),p):l.timestamps},serviceOrder:function(e){return arguments.length?t(e,"service_order","receive_order"):l.service_order.slice()},doublesServiceChange:function(){if(4!=a)return!1},receiveOrder:function(e){return arguments.length?t(e,"receive_order","service_order"):l.receive_order.slice()},teams:function(){var e=[];return e[0]=l.service_order.filter(function(e,t){return(t+1)%2}).sort(),e[1]=l.service_order.filter(function(e,t){return t%2}).sort(),e.sort(),e},playerTeam:function(e){return p.teams().map(function(t){return t.indexOf(e)>=0}).indexOf(!0)},teamPlayers:function(){return p.teams().map(function(e){return e.map(function(e){return p.players(e).name})})},players:function(e){return arguments.length?!(isNaN(e)||e<0||e>3)&&(l.players[e]?l.players[e]:{name:"Player "+["One","Two","Three","Four"][e]}):l.players.length>l.service_order.length?l.players:l.service_order.map(function(e){return p.players(e)})},definePlayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,r=e.name,n=e.birth,i=e.puid,o=e.hand,a=e.seed,s=e.rank,c=e.age,d=e.entry,u=e.ioc,f=e.draw_position;void 0==t&&(t=l.players.length);var h=l.players[t]||{};if(!r&&!h.name||isNaN(t)||t>3)return!1;var m={name:r,birth:n,puid:i,hand:o,seed:a,rank:s,age:c,entry:d,ioc:u,draw_position:f};return Object.keys(m).forEach(function(e){m[e]&&(h[e]=m[e])}),l.players[t]=h,{index:t,player:h}},defineTournament:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={name:e.name,tuid:e.tuid,start_date:e.start_date,tour:e.tour,rank:e.rank,surface:e.surface,in_out:e.in_out,draw:e.draw,draw_size:e.draw_size,round:e.round,level:e.level};return Object.keys(t).forEach(function(e){t[e]&&(l.tournament[e]=t[e])}),l.tournament},defineMatch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={muid:e.muid,date:e.date,gender:e.gender,year:e.year,court:e.court,start_time:e.start_time,end_time:e.end_time,duration:e.duration,status:e.status,umpire:e.umpire,official_score:e.official_score};return Object.keys(t).forEach(function(e){t[e]&&(l.match[e]=t[e])}),l.match},showTiebreakOrder:function(e){return r(12,e)}},v={metadata:p,pointParser:n.pointParser,events:{addPoint:function(t){if(!t)return s;"function"==typeof t?s.indexOf(t)<0&&s.push(t):"array"==typeof t&&t.foreach(e)(function(e){"function"==typeof e&&s.push(c)})},undo:function(t){if(!t)return d;"function"==typeof t?d.indexOf(t)<0&&d.push(t):"array"==typeof t&&t.foreach(e)(function(e){"function"==typeof e&&d.push(c)})},clearEvents:function(){s=[],d=[],u=[]},reset:function(t){if(!t)return u;"function"==typeof t?u.indexOf(t)<0&&u.push(t):"array"==typeof t&&t.foreach(e)(function(e){"function"==typeof e&&u.push(c)})}},history:[],live_stats:!1,perspective_score:!1,assignParser:function(e){v.pointParser=e},advanceService:function(e){var t=l.service_order.indexOf(e)+1;return l.service_order[t<p.players().length?t:0]},nextTiebreakService:function(e,t){var n=r(e.length+1,t);return n[n.length-1]},singles:function(e){return arguments.length?(a=e?2:4,i(),v):2==a},doubles:function(e){return arguments.length?(a=e?4:2,i(),v):4==a},stats:{calculated:function(e){return function(e){var t,r;if(!e||!e.teams)return[];var n=(t={Aces:{numerators:["aces"],calc:"number"},"Double Faults":{numerators:["doubleFaults"],calc:"number"},"First Serve %":{numerators:["serves1stIn"],denominators:["pointsServed"],calc:"percentage"},"Unforced Errors":{numerators:["unforcedErrors"],calc:"number"},"Forced Errors":{numerators:["forcedErrors"],calc:"number"},Winners:{numerators:["winners"],calc:"number"},"Total Points Won":{numerators:["pointsWon"],calc:"number"},"Max Pts/Row":{numerators:["pointsWon"],calc:"maxConsecutive",attribute:"index"},"Max Games/Row":{numerators:["gamesWon"],calc:"maxConsecutive",attribute:"game"}},_defineProperty(t,"Total Points Won",{numerators:["pointsWon"],calc:"number"}),_defineProperty(t,"Points Won 1st",{numerators:["serves1stWon"],denominators:["serves1stIn"],calc:"percentage"}),_defineProperty(t,"Points Won 2nd",{numerators:["serves2ndWon"],denominators:["serves2ndIn"],calc:"percentage"}),_defineProperty(t,"Points Won Receiving",{numerators:["received1stWon","received2ndWon"],denominators:["-pointsServed"],calc:"percentage"}),_defineProperty(t,"Breakpoints Saved",{numerators:["breakpointsSaved"],denominators:["breakpointsFaced"],calc:"percentage"}),_defineProperty(t,"Breakpoints Converted",{numerators:["-breakpointsSaved"],denominators:["-breakpointsFaced"],calc:"difference"}),_defineProperty(t,"Aggressive Margin",{calc:"aggressiveMargin",numerators:["*doubleFaults","*unforcedErrors"],denominators:["*aces","*winners","-*forcedErrors"]}),t),i=function(e,t,r){var n;if(e){var i=e.map(function(e){var n=e.split("-").reverse()[0].split("*").join(""),i=t[0==e.indexOf("-")?1-r:r];return i&&i[n]?i[n].length:0});return(n=[]).concat.apply(n,[0,0].concat(_toConsumableArray(i))).reduce(function(e,t){return e+t})}},o=function(e,t,r){return{numerator:i(e.numerators,t,r),denominator:i(e.denominators,t,r)}},a=function(e,t){var r=Math.round(e/t*100);return{value:r,display:r+"% ("+e+"/"+t+")"}},s={number:function(e,t,r){var n=o(e,t,r);return{display:n.numerator,value:n.numerator,numerators:e.numerators}},maxConsecutive:function(e,t,r){var n=e.numerators[0],i=e.attribute,o=t[r][n];if(!o)return{value:0,display:0};var a=void 0,s=0,c=o.length?1:0;return o.forEach(function(e){a+1==e.point[i]?c+=1:(c>s&&(s=c),c=1),a=e.point[i]}),c>s&&(s=c),{display:s,value:s}},percentage:function(e,t,r){var n=o(e,t,r);return void 0!=n.numerator&&n.denominator?Object.assign(a(n.numerator,n.denominator),{numerators:e.numerators}):{value:0,display:0}},difference:function(e,t,r){var n=o(e,t,r);if(void 0==n.numerator||!n.denominator)return{value:0,display:0};var i=Math.abs(n.denominator-n.numerator);return Object.assign(a(i,n.denominator),{numerators:e.numerators})},aggressiveMargin:function(e,t,r){var n,i=o(e,t,r),s=i.denominator-i.numerator,c=Object.keys(t).map(function(e){return t[e].pointsWon?t[e].pointsWon.length:0}),d=(n=[]).concat.apply(n,[0,0].concat(_toConsumableArray(c))).reduce(function(e,t){return e+t});return Object.assign(a(s,d),{numerators:e.numerators})}},c=(r=[]).concat.apply(r,_toConsumableArray(Object.keys(e.teams).map(function(t){return Object.keys(e.teams[t])})));return Object.keys(n).map(function(t){var r,i=n[t];i.denominators||(i.denominators=[]);var o=(r=[]).concat.apply(r,_toConsumableArray(i.numerators).concat(_toConsumableArray(i.denominators))).map(function(e){return e.split("-").reverse()[0]});return(o=o.filter(function(e){return e.indexOf("*")<0})).map(function(e){return c.indexOf(e)<0}).filter(function(e){return e}).length<1&&{name:t,team_stats:[0,1].map(function(t){return s[i.calc](i,e.teams,t)})}}).filter(function(e){return e})}(v.stats.counters(e))},counters:function(e){if((void 0!=e&&m!=e||void 0==e&&void 0!=m)&&p.resetStats(),!f){v.live_stats=!0;var t=v.history.filter(function(e){return"addPoint"==e.action});void 0!=e&&(t=t.filter(function(t){return t.point.set==e}),m=e),t.forEach(function(e){return v.addStatPoint(e)})}return f}},addStatPoint:function(e){if(v.live_stats){var t=e.point;f||(f={players:{},teams:{}});var r=p.playerTeam(t.server),n=p.playerTeam(t.winner),i=1-n;if(o({player:t.server,episode:e,stat:"pointsServed"}),o({team:n,episode:e,stat:"pointsWon"}),t.result&&t.hand){o({player:t.result.indexOf("Winner")>=0?n:i,episode:e,stat:t.hand})}"Ace"==t.result&&o({player:t.server,episode:e,stat:"aces"}),"Double Fault"==t.result&&o({player:t.server,episode:e,stat:"doubleFaults"}),"Winner"==t.result&&o({player:t.winner,episode:e,stat:"winners"}),"Unforced Error"==t.result&&o({team:i,episode:e,stat:"unforcedErrors"}),"Forced Error"==t.result&&o({team:i,episode:e,stat:"forcedErrors"}),t.first_serve||o({player:t.server,episode:e,stat:"serves1stIn"}),t.first_serve||t.winner!=r||(o({player:t.server,episode:e,stat:"serves1stWon"}),o({team:i,undefined:void 0,stat:"received1stWon"}),o({team:i,undefined:void 0,stat:"received2ndWon"})),t.first_serve||t.winner==r||o({team:n,episode:e,stat:"received1stWon"}),t.first_serve&&"Double Fault"!=!t.result&&o({player:t.server,episode:e,stat:"serves2ndIn"}),t.first_serve&&"Double Fault"!=!t.result&&t.winner==t.server&&(o({player:t.server,episode:e,stat:"serves2ndWon"}),o({team:i,undefined:void 0,stat:"received1stWon"}),o({team:i,undefined:void 0,stat:"received2ndWon"})),t.first_serve&&"Double Fault"!=!t.result&&t.winner!=r&&o({team:n,episode:e,stat:"received2ndWon"}),t.breakpoint&&(o({player:t.server,undefined:void 0,stat:"breakpointsSaved"}),o({player:t.server,episode:e,stat:"breakpointsFaced"})),h&&h.point.breakpoint&&h.point.server==t.winner&&o({player:t.server,episode:e,stat:"breakpointsSaved"}),e.game&&e.game.complete&&o({team:n,episode:e,stat:"gamesWon"}),h=e}},removeStatPoint:function(e){if(v.live_stats){Object.keys(f).forEach(function(t){Object.keys(f[t]).forEach(function(r){Object.keys(f[t][r]).forEach(function(n){f[t][r][n].length&&(f[t][r][n]=f[t][r][n].filter(function(t){return t.point.index!=e.point.index}))})})});var t=v.history.filter(function(e){return"addPoint"==e.action});h=t.length?t[t.length-1]:void 0}}};return p.reset(),v},"function"==typeof define&&define.amd?define(n):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports&&(module.exports=n),n}();