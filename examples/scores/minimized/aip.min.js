!function(){function a(f,g,h,j){var h=h||'GET';if(0>['GET','POST'].indexOf(h))return!1;if('function'!=typeof j)return!1;var k=new XMLHttpRequest;return k.open(h,f,!0),k.setRequestHeader('Content-Type','application/json'),k.onload=function(){j(k.responseText)},k.onerror=function(){j('{"error":"connection error"}')},k.send(g),!0}function b(f,g){var h=c('GET',f);return h?void(h.onload=function(){var j=h.responseText,k=j?JSON.parse(j):{};e.message='JSON Received',g&&g(k)},h.onerror=function(){e.message='Request Unsuccessful'},h.send()):void(e.message='XHR not supported')}function c(f,g){var h=new XMLHttpRequest;return'withCredentials'in h?h.open(f,g,!0):h=null,h}var e={desc:'AIP API Wrappers',version:'0.1',server:location.origin,message:'No Message'};e.QueryString=function(){for(var k,f={},g=window.location.search.substring(1),h=g.split('&'),j=0;j<h.length;j++)if(k=h[j].split('='),'undefined'==typeof f[k[0]])f[k[0]]=k[1];else if('string'==typeof f[k[0]]){var l=[f[k[0]],k[1]];f[k[0]]=l}else f[k[0]].push(k[1]);return f}(),e.okeys=Object.keys(e.QueryString),e.report=function(f,g){b(location.origin+'/report/'+f,g)},e.shareFile=function(f,g,h,j,k){var l=JSON.stringify({data:f,action:'save',destination:g,filename:h,filetype:j});a('/api/match/push',l,'POST',k)},e.requestFile=function(f,g,h){var j=JSON.stringify({source:f,action:'readfile',filename:g});a('/api/match/request',j,'POST',h)},e.requestUrl=function(f,g){var h=JSON.stringify({url:f});a('/api/match/request',h,'POST',g)},'function'==typeof define&&define.amd?define(e):'object'==typeof module&&module.exports&&(module.exports=e),this.aip=e}();

